## 시스템 콜
#### 시스템 콜은 사용자 모드 프로그램이 커널 모드에서만 가능한 자원 접근 작업을 요청하기 위해 실행되는 소프트웨어 인터럽트

1. 사용자 모드 -> 시스템 콜 실행 -> 소프트웨어 인터럽트 발생
2. CPU는 현재 상태(레지스터/PC) 저장(백업)
3. CPU 모드가 커널 모드로 전환
4. OS의 시스템 콜 처리 루틴 실행
5. 처리 완료 후 사용자 모드로 복귀(저장해둔 상태를 복원하고 프로그램을 이어서 실행)

- 운영체제는 사용자가 실행하는 프로그램이 하드웨어 자원에 직접 접근하는 것을 방지해 자원을 보호
- 프로그램이 CPU, 메모리, 하드 디스크를 맘대로 접근, 조작한다면 자원이 무질서하게 관리될 수 있으며 한 프로그램의 실수가 전체 컴퓨터에 영향을 줌
- 운영체제는 프로그램들이 자원에 접근하려할 때 오직 자신을 통해서만 접근하도록 하여 자원을 보호
- 프로그램은 자원에 접근하기 위해서 운영체제에게 도움을 요청해야 함
- 프로그램의 요청을 받은 운영체제는 응용 프로그램 대신 자원에 접근해 요청한 작업을 수행

### 이중 모드(Dual Mode)
CPU가 명령을 실행하는 모드를 사용자 모드와 커널 모드로 구분하는 방식
- **사용자 모드(User Mode)**
  - 운영체제 서비스를 제공받을 수 없는 모드
  - CPU가 해당 모드인 경우, 입출력 명령어와 같은 하드웨어 자원 접근 명령을 실행할 수 없음
  - 일반 프로그램은 기본적으로 사용자 모드로 실행(Chrome, VSCode, 게임, 카톡, 메모장 등)
  - 자바, 파이썬 같은 애플리케이션 코드
  - 컴퓨터에서 돌아가는 대부분의 앱
- **커널 모드(Kernel Mode)**
  - 운영체제 서비스를 제공받을 수 있는 실행 모드로 커널 영역의 코드를 실행할 수 있음
  - CPU가 커널 모드로 명령어를 실행하면 자원에 접근하는 명령어를 비롯한 모든 명령어를 실행할 수 있으며, 운영체제는 커널 모드로 실행
  - 운영체제 커널 코드(Windows NT 커널, Linux 커널)
  - 드라이버(그래픽 카드, SSD, 네트워크 카드 등)
  - 파일 시스템 처리
  - 프로세스/스레드 스케줄링
  - 메모리 관리(MMU)
  - 시스템 콜 처리

### 정리
- 사용자 모드로 실행되는 프로그램이 자원에 접근하는 운영체제 서비스를 제공받으려면 운영체에제 요청을 보내 커널 모드로 전환되어야 함
- 시스템 콜은 운영체제 서비스를 제공받기 위한 요청을 의미하며 소프트웨어 인터럽트
- 시스템 콜을 발생시키는 명령어가 실행되면 CPU는 현재까지의 작업을 백업한 뒤, 커널 영역 내에 시스템 콜을 수행하는 인터럽트 루틴을 실행하고 기존 프로그램으로 복귀


